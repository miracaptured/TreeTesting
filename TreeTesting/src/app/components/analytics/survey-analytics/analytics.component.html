<div *transloco="let t;">
    <button
        mat-button
        style="margin-top: 1vw"
        (click)="saveReport()">
        <div fxLayout="row" fxLayoutGap="10px">
            <mat-icon matIcon svgIcon="download"></mat-icon>
            <h4 matLine>{{t('analytics.report.saveReportButtonLabel')}}</h4>
        </div>
    </button>
    <button
        mat-button
        style="margin-top: 1vw"
        (click)="saveResponses()">
        <div fxLayout="row" fxLayoutGap="10px">
            <mat-icon matIcon svgIcon="download_arrow"></mat-icon>
            <h4 matLine>{{t('analytics.report.saveResponsesButtonLabel')}}</h4>
        </div>
    </button>
    <button
        mat-button
        style="margin-top: 1vw"
        [cdkCopyToClipboard]="analyticsReport?.surveyId"
        (click)="showMessageCopy()">
        <div fxLayout="row" fxLayoutGap="10px">
            <mat-icon matIcon svgIcon="share"></mat-icon>
            <h4 matLine>{{t('survey.table.shareLabel')}}</h4>
        </div>
    </button>

    <mat-tab-group>
        <mat-tab label="Отчет">
            <app-report [analyticsReport]="analyticsReport"></app-report>
        </mat-tab>
        <mat-tab label="Таблица ответов">
            <div fxLayout="column" style="height: 100%;" *transloco="let t;">
                <p>{{surveyWithAnswers?.name}}</p>
                <mat-card *ngFor="let taskGroup of surveyWithAnswers?.taskGroups">
                    <mat-card-header>
                        <mat-card-title>{{taskGroup?.name}}</mat-card-title>
                    </mat-card-header>
                    <mat-card-content>
                        <mat-expansion-panel *ngFor="let task of taskGroup?.tasks; let i = index">
                            <mat-expansion-panel-header>
                                <mat-panel-title>{{task?.name}}</mat-panel-title>
                            </mat-expansion-panel-header>
                            <app-answers-table [task]="task"></app-answers-table>
                        </mat-expansion-panel>
                    </mat-card-content>
                </mat-card>
            </div>
        </mat-tab>
    </mat-tab-group>
</div>
